<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lucky Spin</title>
  <style>
    body {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background-color: #f0f0f0;
      margin: 0;
      font-family: sans-serif;
      overflow: hidden;
    }

    .spinner-wrapper {
      position: relative;
      width: 600px;
      height: 600px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .spinner-container {
      position: relative;
      width: 450px;
      height: 450px;
      border-radius: 50%;
      overflow: hidden;
      z-index: 10;
    }

    .spinner-wheel {
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      transition: transform 4s ease-out;
      background-image: url('01.wheel-05.png');
      background-size: cover;
      background-position: center;
    }

    .spinner-arrow-img {
      position: absolute;
      width: 80px;
      top: -10px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 30;
    }

    .segment {
      position: absolute;
      width: 50%;
      height: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      transform-origin: 100% 100%;
    }

    .segment img {
      width: 80%;
      height: 80%;
      object-fit: contain;
      transform: rotate(var(--rotation));
      transition: transform 4s ease-out;
     
    }

    .spin-button {
      margin-top: 30px;
      padding: 18px 35px;
      font-size: 22px;
      cursor: pointer;
      background-color: #051950;
      color: white;
      border: none;
      border-radius: 8px;
      transition: background-color 0.3s ease, transform 0.1s ease;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      align-items: center;
    }

    .spin-button:hover {
      background-color: #193991;
      transform: translateY(-2px);
    }

    .spin-button:active {
      transform: translateY(0);
      box-shadow: 0 2px 3px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <div class="spinner-wrapper">
    <div class="spinner-container" id="spinnerContainer">
      <div class="spinner-wheel" id="spinnerWheel"></div>
      <img src="01.wheel-10.png" alt="Spinner Arrow" class="spinner-arrow-img">
    </div>
  </div>
  <button class="spin-button" id="spinButton">Spin!</button>

  <script>
    const spinnerWheel = document.getElementById('spinnerWheel');
    const spinButton = document.getElementById('spinButton');

    const segmentsData = [
      { name: "Chawan Mushi", image: "images/ChawanMushi.png" },
      { name: "Tofu Steak", image: "images/TofuSteak.png" },
      { name: "Shirataki Spicy Itame", image: "images/ShirakiSpicyItame.png" },
      { name: "Tekka Maki", image: "images/TekkaMaki.png" }
    ];

    const stopDegrees = [45, 135, 225, 315];
    let currentRotation = 0;

    function createSegments() {
      segmentsData.forEach((segment, index) => {
        const segmentDiv = document.createElement('div');
        segmentDiv.className = 'segment';

        const angle = index * 90;
        segmentDiv.style.transform = `rotate(${angle}deg) `;

        const img = document.createElement('img');
        img.src = segment.image;
        img.alt = segment.name;
        img.style.setProperty('--rotation', `-${angle}deg `);

        segmentDiv.appendChild(img);
        spinnerWheel.appendChild(segmentDiv);
      });
    }

    createSegments();

    spinButton.addEventListener('click', () => {
      spinButton.disabled = true;
      const randomIndex = Math.floor(Math.random() * stopDegrees.length);
      const targetDegree = stopDegrees[randomIndex];

      const rotationOffset = currentRotation % 360;
      const degreesToReachTarget = (targetDegree - rotationOffset + 360) % 360;
      const fullSpins = 5;
      const totalRotation = currentRotation + (fullSpins * 360) + degreesToReachTarget;

      spinnerWheel.style.transform = `rotate(${totalRotation}deg)`;

      document.querySelectorAll('.segment img').forEach((img, index) => {
        const angle = index * 90;
        img.style.transform = `rotate(${-(angle + totalRotation)}deg) `;
      });

      spinnerWheel.addEventListener('transitionend', () => {
        currentRotation = totalRotation;
        spinButton.disabled = false;
        showMessageBox(`คุณได้รับ: ${segmentsData[randomIndex].name}!`);
      }, { once: true });
    });

    function showMessageBox(message) {
      const messageBox = document.createElement('div');
      messageBox.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: #fff;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        z-index: 100;
        text-align: center;
        font-size: 20px;
        color: #051950;
        border: 2px solid #193991;
        max-width: 80vw;
        box-sizing: border-box;
      `;
      messageBox.innerHTML = `
        <p>${message}</p>
        <button style="
          margin-top: 20px;
          padding: 10px 20px;
          font-size: 18px;
          background-color: #051950;
          color: white;
          border: none;
          border-radius: 5px;
          cursor: pointer;
        ">ปิด</button>
      `;
      document.body.appendChild(messageBox);
      messageBox.querySelector('button').addEventListener('click', () => messageBox.remove());
    }
  </script>
</body>
</html>
